config:
  target: "http://localhost:3000"
  phases:
    - duration: 60
      arrivalRate: 1
      rampTo: 20
      name: "warm up application"
    - duration: 180
      arrivalRate: 20
      name: "Sustained max load"
    # - duration: 60
    #   arrivalRate: 40
    #   name: "40 users/s"
  payload:
    path: "newrelicId.csv"
    fields:
      - "id"
    skipHeader: true
  http:
    pool: 20
  ensure:
    maxErrorRate: 1
    p95: 2000
    max: 3000

scenarios:
  - name: "Senario to loop 5 GET requests"
    weight: 7
    flow:
      - loop:
        - get:
            url: "/main/1/read"
        - think: 5
        count: 8
  - name: "Secnario to make POST request"
    weight: 1
    flow:
      - loop:
        - think: 5
        - post:
            url: "/main/{{ id }}/create"
            json:
              name: "adipisci sit at"
              genre: "Romance|Fantasy"
              score: "3"
              runtime: "157"
              rating: "PG"
              releaseday: "23"
              releasemonth: "June"
              releaseyear: "1994"
              image: "https://s3.us-east-2.amazonaws.com/sdc-andrew-movie-posters/--anoWjsY-8.jpg"
        count: 1


